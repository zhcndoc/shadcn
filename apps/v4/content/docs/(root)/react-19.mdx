---
title: Next.js 15 + React 19
description: åœ¨ Next.js 15 å’Œ React 19 ä¸­ä½¿ç”¨ shadcn/uiã€‚
---

<Callout className="mb-6 border-blue-600 bg-blue-50 dark:border-blue-900 dark:bg-blue-950 [&_code]:bg-blue-100 dark:[&_code]:bg-blue-900">
  **æ›´æ–°ï¼š** æˆ‘ä»¬åœ¨ `canary` ç‰ˆæœ¬ä¸­å·²æ·»åŠ å¯¹ React 19 å’Œ Tailwind v4 çš„å…¨é¢æ”¯æŒã€‚è¯¦æƒ…è¯·å‚è§ 
  [Tailwind v4](/docs/tailwind-v4) æ–‡æ¡£ã€‚
</Callout>

<Callout>
  **ä»¥ä¸‹æŒ‡å—é€‚ç”¨äºæ‰€æœ‰æ”¯æŒ React 19 çš„æ¡†æ¶ã€‚** æˆ‘å°†æ­¤é¡µé¢å‘½åä¸º â€œNext.js 15 + React 19â€ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿å‡çº§åˆ° Next.js 15 çš„ç”¨æˆ·æŸ¥æ‰¾ã€‚æˆ‘ä»¬æ­£åœ¨ä¸åŒ…ç»´æŠ¤è€…åˆä½œï¼Œå¸®åŠ©ä»–ä»¬å‡çº§åˆ° React 19ã€‚
</Callout>

## ç²¾ç®€æ€»ç»“ï¼ˆTL;DRï¼‰

å¦‚æœä½ ä½¿ç”¨ `npm`ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ æ ‡å¿—æ¥å®‰è£… shadcn/ui çš„ä¾èµ–ã€‚åœ¨è¿è¡Œ `shadcn` CLI æ—¶ï¼Œä¼šæç¤ºä½ é€‰æ‹©ä¸€ä¸ªæ ‡å¿—ã€‚ä½¿ç”¨ pnpmã€bun æˆ– yarn åˆ™æ— éœ€æ·»åŠ æ ‡å¿—ã€‚

æœ‰å…³æ¯ä¸ªåŒ…å¯¹ React 19 æ”¯æŒçš„çŠ¶æ€ï¼Œè¯·å‚é˜… [å‡çº§çŠ¶æ€](#upgrade-status)ã€‚

## å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

React 19 ç°å·²ä¸º [rc ç‰ˆæœ¬](https://www.npmjs.com/package/react?activeTab=versions) ï¼Œå¹¶ä¸”å·²åœ¨æœ€æ–°ç‰ˆ Next.js 15 ä¸­[æµ‹è¯•å¹¶æ”¯æŒ](https://nextjs.org/blog/next-15#react-19)ã€‚

ä¸ºäº†æ”¯æŒ React 19ï¼ŒåŒ…ç»´æŠ¤è€…éœ€è¦æµ‹è¯•å¹¶æ›´æ–°ä»–ä»¬çš„åŒ…ï¼Œå°† React 19 ä½œä¸º peer dependency æ·»åŠ è¿›æ¥ã€‚è¿™é¡¹å·¥ä½œå·²ç»åœ¨[è¿›è¡Œä¸­](https://github.com/radix-ui/primitives/pull/2952)ã€[è¿›è¡Œä¸­](https://github.com/pacocoursey/cmdk/pull/318) å’Œ[è¿›è¡Œä¸­](https://github.com/emilkowalski/vaul/pull/498)ã€‚

```diff /^19.0/
"peerDependencies": {
-  "react": "^16.8 || ^17.0 || ^18.0",
+  "react": "^16.8 || ^17.0 || ^18.0 || ^19.0",
-  "react-dom": "^16.8 || ^17.0 || ^18.0"
+  "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0"
},
```

<Callout>
  ä½ å¯ä»¥é€šè¿‡è¿è¡Œ `npm info <package> peerDependencies` æ¥æ£€æŸ¥åŒ…æ˜¯å¦å·²å°† React 19 åˆ—ä¸º peer dependencyã€‚
</Callout>

ä¸æ­¤åŒæ—¶ï¼Œå¦‚æœä½ å®‰è£…çš„åŒ… **æœª** å°† React 19 åˆ—ä¸º peer dependencyï¼Œä¼šçœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„é”™è¯¯ä¿¡æ¯ï¼š

```bash
npm error code ERESOLVE
npm error ERESOLVE unable to resolve dependency tree
npm error
npm error While resolving: my-app@0.1.0
npm error Found: react@19.0.0-rc-69d4b800-20241021
npm error node_modules/react
npm error   react@"19.0.0-rc-69d4b800-20241021" from the root project
```

<Callout>
  **æ³¨æ„ï¼š** è¿™ä»…åœ¨ npm ä¸­å‡ºç°ã€‚PNPM å’Œ Bun åªä¼šæ˜¾ç¤ºé™é»˜è­¦å‘Šã€‚
</Callout>

## å¦‚ä½•è§£å†³

### æ–¹æ¡ˆä¸€ï¼š`--force` æˆ– `--legacy-peer-deps`

ä½ å¯ä»¥ä½¿ç”¨ `--force` æˆ– `--legacy-peer-deps` æ ‡å¿—å¼ºåˆ¶å®‰è£…åŒ…ï¼š

```bash
npm i <package> --force

npm i <package> --legacy-peer-deps
```

è¿™å°†å®‰è£…åŒ…å¹¶å¿½ç•¥ peer dependency è­¦å‘Šã€‚

<Accordion type="multiple">
  <AccordionItem value="flags">
    <AccordionTrigger className="font-medium">
      `--force` å’Œ `--legacy-peer-deps` æ ‡å¿—çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ
    </AccordionTrigger>
    <AccordionContent className="[&_ul]:mt-0">

      - `--force`ï¼šå¿½ç•¥å¹¶è¦†ç›–æ‰€æœ‰ä¾èµ–å†²çªï¼Œå¼ºåˆ¶å®‰è£…åŒ…ã€‚
      - `--legacy-peer-deps`ï¼šè·³è¿‡ä¸¥æ ¼çš„ peer dependency æ£€æŸ¥ï¼Œå…è®¸å®‰è£…æœªæ»¡è¶³ peer dependencies çš„åŒ…ï¼Œä»¥é¿å…é”™è¯¯ã€‚

    </AccordionContent>

  </AccordionItem>
</Accordion>

### æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ React 18

ä½ å¯ä»¥å°† `react` å’Œ `react-dom` é™çº§åˆ°ç‰ˆæœ¬ 18ï¼Œè¿™æ ·å°±ä¸æ‰€å®‰è£…çš„åŒ…å…¼å®¹ï¼Œç­‰ä¾èµ–æ›´æ–°åå†å‡çº§ã€‚

```bash
npm i react@18 react-dom@18
```

æ— è®ºé€‰æ‹©å“ªç§æ–¹æ¡ˆï¼Œè¯·åŠ¡å¿…å……åˆ†æµ‹è¯•ä½ çš„åº”ç”¨ï¼Œç¡®ä¿ä¸ä¼šå‡ºç°å›å½’é—®é¢˜ã€‚

## åœ¨ Next.js 15 ä¸Šä½¿ç”¨ shadcn/ui

### ä½¿ç”¨ pnpmã€bun æˆ– yarn

è¯·æŒ‰ç…§[å®‰è£…æŒ‡å—](/docs/installation/next)ä¸­çš„æ­¥éª¤å®‰è£… shadcn/uiï¼Œæ— éœ€ä»»ä½•æ ‡å¿—ã€‚

### ä½¿ç”¨ npm

å½“ä½ è¿è¡Œ `npx shadcn@latest init -d` æ—¶ï¼Œä¼šæç¤ºä½ é€‰æ‹©ä¸€ç§æ–¹å¼ä»¥è§£å†³ peer dependency é—®é¢˜ï¼š

```bash
It looks like you are using React 19.
Some packages may fail to install due to peer dependency issues (see https://ui.shadcn.com/react-19).

? How would you like to proceed? â€º - Use arrow-keys. Return to submit.
â¯   Use --force
    Use --legacy-peer-deps
```

æ¥ç€ï¼Œä½ å¯ä»¥ä½¿ç”¨é€‰æ‹©çš„æ ‡å¿—è¿è¡Œè¯¥å‘½ä»¤ã€‚

## æ·»åŠ ç»„ä»¶

æ·»åŠ ç»„ä»¶çš„æµç¨‹ä¸ä¸Šè¿°ç›¸åŒã€‚è¯·é€‰æ‹©ä¸€ä¸ªæ ‡å¿—æ¥è§£å†³ peer dependency é—®é¢˜ã€‚

**è¯·è®°å¾—æ¯æ¬¡å®‰è£…æ–°ä¾èµ–åï¼ŒåŠ¡å¿…æµ‹è¯•ä½ çš„åº”ç”¨ã€‚**

## å‡çº§çŠ¶æ€

ä¸ºäº†æ–¹ä¾¿ä½ è·Ÿè¸ªå‡çº§è¿›åº¦ï¼Œæˆ‘åˆ¶ä½œäº†ä¸‹é¢çš„è¡¨æ ¼ï¼Œåˆ—å‡ºäº† shadcn/ui ä¾èµ–åŒ…å¯¹ React 19 çš„æ”¯æŒçŠ¶æ€ã€‚

- âœ… - ä½¿ç”¨ npmã€pnpm å’Œ bun å‡æ”¯æŒ React 19ã€‚
- ğŸš§ - ä½¿ç”¨ pnpm å’Œ bun æ”¯æŒ React 19ã€‚npm éœ€è¦æ·»åŠ æ ‡å¿—ã€‚ç›¸å…³ PR æ­£åœ¨è¿›è¡Œä¸­ã€‚

| åŒ…å                                                                              | çŠ¶æ€   | å¤‡æ³¨                                                         |
| --------------------------------------------------------------------------------- | ------ | ------------------------------------------------------------ |
| [radix-ui](https://www.npmjs.com/package/@radix-ui/react-icons)                    | âœ…     |                                                              |
| [lucide-react](https://www.npmjs.com/package/lucide-react)                         | âœ…     |                                                              |
| [class-variance-authority](https://www.npmjs.com/package/class-variance-authority) | âœ…     | æœªå°† React 19 åˆ—ä¸º peer dependencyã€‚                          |
| [tailwindcss-animate](https://www.npmjs.com/package/tailwindcss-animate)           | âœ…     | æœªå°† React 19 åˆ—ä¸º peer dependencyã€‚                          |
| [embla-carousel-react](https://www.npmjs.com/package/embla-carousel-react)         | âœ…     |                                                              |
| [recharts](https://www.npmjs.com/package/recharts)                                 | âœ…     | è§ä¸‹æ–‡[è¯´æ˜](#recharts)                                     |
| [react-hook-form](https://www.npmjs.com/package/react-hook-form)                   | âœ…     |                                                              |
| [react-resizable-panels](https://www.npmjs.com/package/react-resizable-panels)     | âœ…     |                                                              |
| [sonner](https://www.npmjs.com/package/sonner)                                     | âœ…     |                                                              |
| [react-day-picker](https://www.npmjs.com/package/react-day-picker)                 | âœ…     | npm éœ€è¦æ·»åŠ æ ‡å¿—æ”¯æŒã€‚å‡çº§åˆ° v9 çš„å·¥ä½œæ­£åœ¨è¿›è¡Œä¸­ã€‚            |
| [input-otp](https://www.npmjs.com/package/input-otp)                               | âœ…     |                                                              |
| [vaul](https://www.npmjs.com/package/vaul)                                         | âœ…     |                                                              |
| [@radix-ui/react-icons](https://www.npmjs.com/package/@radix-ui/react-icons)       | ğŸš§     | è§[PR #194](https://github.com/radix-ui/icons/pull/194)       |
| [cmdk](https://www.npmjs.com/package/cmdk)                                         | âœ…     |                                                              |

å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·åœ¨ GitHub ä¸Š[æäº¤ issue](https://github.com/shadcn/ui/issues)ã€‚

## Recharts

è¦åœ¨ React 19 ä¸­ä½¿ç”¨ rechartsï¼Œä½ éœ€è¦é‡å†™ `react-is` ä¾èµ–ã€‚

<Steps>

<Step>åœ¨ä½ çš„ `package.json` ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</Step>

```json title="package.json"
"overrides": {
  "react-is": "^19.0.0-rc-69d4b800-20241021"
}
```

æ³¨æ„ï¼š`react-is` çš„ç‰ˆæœ¬éœ€è¦ä¸ä½ ä½¿ç”¨çš„ React 19 ç‰ˆæœ¬ç›¸åŒ¹é…ï¼Œä¸Šè¿°ä¸ºç¤ºä¾‹ã€‚

<Step>è¿è¡Œ `npm install --legacy-peer-deps`</Step>

</Steps>