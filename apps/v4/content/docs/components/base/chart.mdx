---
title: 图表
description: 美观的图表。使用 Recharts 构建。复制并粘贴到你的应用中。
base: base
component: true
---

<Callout>

**注意：** 我们正在升级到 Recharts v3。在此期间，如果你想开始测试 v3，请参见[这里](https://github.com/shadcn-ui/ui/issues/7669#issuecomment-2998299159)评论中的代码。我们很快会发布正式版本。

</Callout>

<ComponentPreview
  styleName="base-nova"
  name="chart-demo"
  className="theme-blue [&_.preview]:h-auto [&_.preview]:p-0 [&_.preview]:lg:min-h-[404px] [&_.preview>div]:w-full [&_.preview>div]:border-none [&_.preview>div]:shadow-none"
  hideCode
/>

介绍 **图表**。一组图表组件，你可以复制粘贴到你的应用中。

图表设计得开箱即用，外观优美。它们和其他组件配合良好，并且完全可定制以适应你的项目。

[浏览图表库](/charts)。

## 组件

我们底层使用的是 [Recharts](https://recharts.org/)。

我们设计了 `chart` 组件时考虑了组合的思想。**你使用 Recharts 组件构建你的图表，仅在需要时引入自定义组件，比如 `ChartTooltip`**。

```tsx showLineNumbers /ChartContainer/ /ChartTooltipContent/
import { Bar, BarChart } from "recharts"

import { ChartContainer, ChartTooltipContent } from "@/components/ui/chart"

export function MyChart() {
  return (
    <ChartContainer>
      <BarChart data={data}>
        <Bar dataKey="value" />
        <ChartTooltip content={<ChartTooltipContent />} />
      </BarChart>
    </ChartContainer>
  )
}
```

我们不对 Recharts 进行封装。这意味着你不会被锁定在某个抽象层。当 Recharts 发布新版本时，你可以按照官方升级路径升级你的图表。

**这些组件是属于你的**。

## 安装

<CodeTabs>

<TabsList>
  <TabsTrigger value="cli">命令</TabsTrigger>
  <TabsTrigger value="manual">手动</TabsTrigger>
</TabsList>
<TabsContent value="cli">

```bash
npx shadcn@latest add chart
```

</TabsContent>

<TabsContent value="manual">

<Steps className="mb-0 pt-2">

<Step>安装以下依赖：</Step>

```bash
npm install recharts
```

<Step>复制并粘贴以下代码到 `components/ui/chart.tsx`。</Step>

<ComponentSource
  name="chart"
  title="components/ui/chart.tsx"
  styleName="base-nova"
/>

<Step>将以下颜色添加到你的 CSS 文件中</Step>

```css title="app/globals.css" showLineNumbers
@layer base {
  :root {
    --chart-1: oklch(0.646 0.222 41.116);
    --chart-2: oklch(0.6 0.118 184.704);
    --chart-3: oklch(0.398 0.07 227.392);
    --chart-4: oklch(0.828 0.189 84.429);
    --chart-5: oklch(0.769 0.188 70.08);
  }

  .dark {
    --chart-1: oklch(0.488 0.243 264.376);
    --chart-2: oklch(0.696 0.17 162.48);
    --chart-3: oklch(0.769 0.188 70.08);
    --chart-4: oklch(0.627 0.265 303.9);
    --chart-5: oklch(0.645 0.246 16.439);
  }
}
```

</Steps>

</TabsContent>

</CodeTabs>

## 你的第一个图表

让我们构建你的第一个图表。我们将构建一个柱状图，添加网格、坐标轴、提示信息和图例。

<Steps>

<Step>首先定义你的数据</Step>

以下数据代表每个月的桌面和移动端用户数。

<Callout className="mt-4">

**注意：** 你的数据格式可以是任何形状。你不必局限于下方的数据结构。使用 `dataKey` 属性将你的数据映射到图表。

</Callout>

```tsx title="components/example-chart.tsx" showLineNumbers
const chartData = [
  { month: "January", desktop: 186, mobile: 80 },
  { month: "February", desktop: 305, mobile: 200 },
  { month: "March", desktop: 237, mobile: 120 },
  { month: "April", desktop: 73, mobile: 190 },
  { month: "May", desktop: 209, mobile: 130 },
  { month: "June", desktop: 214, mobile: 140 },
]
```

<Step>定义图表配置</Step>

图表配置持有图表的配置项。人类可读的字符串，比如标签、图标和主题使用的颜色令牌，都放在这里。

```tsx title="components/example-chart.tsx" showLineNumbers
import { type ChartConfig } from "@/components/ui/chart"

const chartConfig = {
  desktop: {
    label: "桌面",
    color: "#2563eb",
  },
  mobile: {
    label: "移动端",
    color: "#60a5fa",
  },
} satisfies ChartConfig
```

<Step>构建你的图表</Step>

现在你可以用 Recharts 组件构建你的图表了。

<Callout className="mt-4 bg-amber-50 border-amber-200 dark:bg-amber-950/50 dark:border-amber-950">

**重要：** 记得在 `ChartContainer` 组件上设置 `min-h-[值]`。这是图表响应式必需的。

</Callout>

<ComponentPreview
  styleName="base-nova"
  name="chart-example"
  previewClassName="h-80"
/>

</Steps>

### 添加网格

让我们给图表添加网格。

<Steps className="mb-0 pt-2">

<Step>导入 `CartesianGrid` 组件。</Step>

```tsx /CartesianGrid/
import { Bar, BarChart, CartesianGrid } from "recharts"
```

<Step>将 `CartesianGrid` 组件添加到你的图表。</Step>

```tsx showLineNumbers {3}
<ChartContainer config={chartConfig} className="min-h-[200px] w-full">
  <BarChart accessibilityLayer data={chartData}>
    <CartesianGrid vertical={false} />
    <Bar dataKey="desktop" fill="var(--color-desktop)" radius={4} />
    <Bar dataKey="mobile" fill="var(--color-mobile)" radius={4} />
  </BarChart>
</ChartContainer>
```

<ComponentPreview
  styleName="base-nova"
  name="chart-example-grid"
  previewClassName="h-80"
/>

</Steps>

### 添加坐标轴

为了给图表添加 x 轴，我们使用 `XAxis` 组件。

<Steps className="mb-0 pt-2">

<Step>导入 `XAxis` 组件。</Step>

```tsx /XAxis/
import { Bar, BarChart, CartesianGrid, XAxis } from "recharts"
```

<Step>将 `XAxis` 组件添加到你的图表。</Step>

```tsx showLineNumbers {4-10}
<ChartContainer config={chartConfig} className="h-[200px] w-full">
  <BarChart accessibilityLayer data={chartData}>
    <CartesianGrid vertical={false} />
    <XAxis
      dataKey="month"
      tickLine={false}
      tickMargin={10}
      axisLine={false}
      tickFormatter={(value) => value.slice(0, 3)}
    />
    <Bar dataKey="desktop" fill="var(--color-desktop)" radius={4} />
    <Bar dataKey="mobile" fill="var(--color-mobile)" radius={4} />
  </BarChart>
</ChartContainer>
```

<ComponentPreview
  styleName="base-nova"
  name="chart-example-axis"
  previewClassName="h-80"
/>

</Steps>

### 添加提示信息（Tooltip）

到目前为止我们只用到了 Recharts 的组件。它们开箱即用的样式很棒，这得益于 `chart` 组件的一些定制。

要添加提示信息，我们将使用 `chart` 里的自定义组件 `ChartTooltip` 和 `ChartTooltipContent`。

<Steps className="mb-0 pt-2">

<Step>导入 `ChartTooltip` 和 `ChartTooltipContent` 组件。</Step>

```tsx
import { ChartTooltip, ChartTooltipContent } from "@/components/ui/chart"
```

<Step>将这些组件添加到你的图表中。</Step>

```tsx showLineNumbers {11}
<ChartContainer config={chartConfig} className="h-[200px] w-full">
  <BarChart accessibilityLayer data={chartData}>
    <CartesianGrid vertical={false} />
    <XAxis
      dataKey="month"
      tickLine={false}
      tickMargin={10}
      axisLine={false}
      tickFormatter={(value) => value.slice(0, 3)}
    />
    <ChartTooltip content={<ChartTooltipContent />} />
    <Bar dataKey="desktop" fill="var(--color-desktop)" radius={4} />
    <Bar dataKey="mobile" fill="var(--color-mobile)" radius={4} />
  </BarChart>
</ChartContainer>
```

<ComponentPreview
  styleName="base-nova"
  name="chart-example-tooltip"
  previewClassName="h-80"
/>

将鼠标悬停以查看提示信息。很简单吧？两个组件，我们就实现了一个漂亮的提示框。

</Steps>

### 添加图例

我们用同样的方法添加图例。使用 `chart` 里的 `ChartLegend` 和 `ChartLegendContent` 组件。

<Steps className="mb-0 pt-2">

<Step>导入 `ChartLegend` 和 `ChartLegendContent` 组件。</Step>

```tsx
import { ChartLegend, ChartLegendContent } from "@/components/ui/chart"
```

<Step>将这些组件添加到你的图表中。</Step>

```tsx showLineNumbers {12}
<ChartContainer config={chartConfig} className="h-[200px] w-full">
  <BarChart accessibilityLayer data={chartData}>
    <CartesianGrid vertical={false} />
    <XAxis
      dataKey="month"
      tickLine={false}
      tickMargin={10}
      axisLine={false}
      tickFormatter={(value) => value.slice(0, 3)}
    />
    <ChartTooltip content={<ChartTooltipContent />} />
    <ChartLegend content={<ChartLegendContent />} />
    <Bar dataKey="desktop" fill="var(--color-desktop)" radius={4} />
    <Bar dataKey="mobile" fill="var(--color-mobile)" radius={4} />
  </BarChart>
</ChartContainer>
```

<ComponentPreview
  styleName="base-nova"
  name="chart-example-legend"
  previewClassName="h-80"
/>

</Steps>

完成了。你已经构建了你的第一个图表！接下来呢？

- [主题和颜色](/docs/components/chart#theming)
- [提示信息](/docs/components/chart#tooltip)
- [图例](/docs/components/chart#legend)

## 图表配置

图表配置是你定义标签、图标和图表颜色的位置。

它有意与图表数据解耦。

这让你可以在多个图表之间共享配置和颜色令牌。也可以独立使用于数据或颜色令牌来自远程或不同格式的情况。

```tsx showLineNumbers /ChartConfig/
import { Monitor } from "lucide-react"

import { type ChartConfig } from "@/components/ui/chart"

const chartConfig = {
  desktop: {
    label: "桌面",
    icon: Monitor,
    // 颜色可以是类似 'hsl(220, 98%, 61%)' 或 'var(--color-name)'
    color: "#2563eb",
    // 或者是包含 'light' 和 'dark' 主题颜色的对象
    theme: {
      light: "#2563eb",
      dark: "#dc2626",
    },
  },
} satisfies ChartConfig
```

## 主题

图表内置主题支持。你可以使用 CSS 变量（推荐）或者任意颜色格式的颜色值，如 hex、hsl 或 oklch。

### CSS 变量

<Steps className="mb-0 pt-2">

<Step>在 CSS 文件中定义你的颜色</Step>

```css title="app/globals.css" showLineNumbers
@layer base {
  :root {
    --chart-1: oklch(0.646 0.222 41.116);
    --chart-2: oklch(0.6 0.118 184.704);
  }

  .dark {
    --chart-1: oklch(0.488 0.243 264.376);
    --chart-2: oklch(0.696 0.17 162.48);
  }
}
```

<Step>在你的 `chartConfig` 中添加这些颜色</Step>

```tsx title="components/example-chart.tsx" showLineNumbers
const chartConfig = {
  desktop: {
    label: "桌面",
    color: "var(--chart-1)",
  },
  mobile: {
    label: "移动端",
    color: "var(--chart-2)",
  },
} satisfies ChartConfig
```

</Steps>

### hex、hsl 或 oklch

你也可以直接在图表配置中定义颜色。使用你喜欢的颜色格式。

```tsx title="components/example-chart.tsx" showLineNumbers
const chartConfig = {
  desktop: {
    label: "桌面",
    color: "#2563eb",
  },
  mobile: {
    label: "移动端",
    color: "hsl(220, 98%, 61%)",
  },
  tablet: {
    label: "平板",
    color: "oklch(0.5 0.2 240)",
  },
  laptop: {
    label: "笔记本",
    color: "var(--chart-2)",
  },
} satisfies ChartConfig
```

### 使用颜色

要在图表中使用主题颜色，使用格式 `var(--color-KEY)` 引用颜色。

#### 组件中

```tsx
<Bar dataKey="desktop" fill="var(--color-desktop)" />
```

#### 图表数据中

```tsx title="components/example-chart.tsx" showLineNumbers
const chartData = [
  { browser: "chrome", visitors: 275, fill: "var(--color-chrome)" },
  { browser: "safari", visitors: 200, fill: "var(--color-safari)" },
]
```

#### Tailwind 中

```tsx title="components/example-chart.tsx"
<LabelList className="fill-[--color-desktop]" />
```

## 提示信息（Tooltip）

图表的提示信息包含标签、名称、指示器和值。你可以组合这些来自定义你的提示框。

<ComponentPreview styleName="base-nova" name="chart-tooltip" hideCode />

你可以通过 `hideLabel`、`hideIndicator` 属性关闭显示标签或指示器，通过 `indicator` 属性自定义指示器样式。

使用 `labelKey` 和 `nameKey` 可以为提示框使用自定义的标签和名称键。

图表提供 `<ChartTooltip>` 和 `<ChartTooltipContent>` 两个组件，你可以用它们为图表添加自定义提示。

```tsx title="components/example-chart.tsx"
import { ChartTooltip, ChartTooltipContent } from "@/components/ui/chart"
```

```tsx title="components/example-chart.tsx"
<ChartTooltip content={<ChartTooltipContent />} />
```

### 属性

以下属性可以用来定制提示框。

| 属性              | 类型                      | 描述                         |
| :---------------- | :------------------------ | :--------------------------- |
| `labelKey`        | string                    | 用于提示标签的配置或数据键  |
| `nameKey`         | string                    | 用于提示名称的配置或数据键  |
| `indicator`       | `dot`、`line` 或 `dashed` | 提示框指示器样式             |
| `hideLabel`       | boolean                   | 是否隐藏标签                 |
| `hideIndicator`   | boolean                   | 是否隐藏指示器               |

### 颜色

颜色会自动从图表配置中引用。

### 自定义示例

如果要自定义提示标签和名称的键，使用 `labelKey` 和 `nameKey`。

```tsx showLineNumbers /browser/
const chartData = [
  { browser: "chrome", visitors: 187, fill: "var(--color-chrome)" },
  { browser: "safari", visitors: 200, fill: "var(--color-safari)" },
]

const chartConfig = {
  visitors: {
    label: "总访客数",
  },
  chrome: {
    label: "Chrome",
    color: "hsl(var(--chart-1))",
  },
  safari: {
    label: "Safari",
    color: "hsl(var(--chart-2))",
  },
} satisfies ChartConfig
```

```tsx title="components/example-chart.tsx"
<ChartTooltip
  content={<ChartTooltipContent labelKey="visitors" nameKey="browser" />}
/>
```

这样提示框会显示 `总访客数` 作为标签，`Chrome` 和 `Safari` 作为提示名称。

## 图例（Legend）

你可以使用自定义的 `<ChartLegend>` 和 `<ChartLegendContent>` 组件为图表添加图例。

```tsx title="components/example-chart.tsx"
import { ChartLegend, ChartLegendContent } from "@/components/ui/chart"
```

```tsx title="components/example-chart.tsx"
<ChartLegend content={<ChartLegendContent />} />
```

### 颜色

颜色会自动从图表配置中引用。

### 自定义示例

如果要自定义图例名称的键，使用 `nameKey` 属性。

```tsx showLineNumbers /browser/
const chartData = [
  { browser: "chrome", visitors: 187, fill: "var(--color-chrome)" },
  { browser: "safari", visitors: 200, fill: "var(--color-safari)" },
]

const chartConfig = {
  chrome: {
    label: "Chrome",
    color: "hsl(var(--chart-1))",
  },
  safari: {
    label: "Safari",
    color: "hsl(var(--chart-2))",
  },
} satisfies ChartConfig
```

```tsx title="components/example-chart.tsx"
<ChartLegend content={<ChartLegendContent nameKey="browser" />} />
```

这样图例中会显示 `Chrome` 和 `Safari` 作为名称。

## 无障碍支持（Accessibility）

你可以开启 `accessibilityLayer` 属性，为你的图表添加无障碍层。

这个属性为你的图表添加键盘访问和屏幕阅读器支持。

```tsx title="components/example-chart.tsx"
<LineChart accessibilityLayer />
```

## RTL

To enable RTL support in shadcn/ui, see the [RTL configuration guide](/docs/rtl).

<ComponentPreview
  styleName="base-nova"
  name="chart-rtl"
  direction="rtl"
  previewClassName="h-92"
/>
