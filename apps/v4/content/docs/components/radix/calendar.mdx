---
title: 日历 Calendar
description: 一个允许用户输入和编辑日期的日期字段组件。
base: radix
component: true
links:
  doc: https://react-day-picker.js.org
---

<ComponentPreview
  styleName="radix-nova"
  name="calendar-demo"
/>

## 安装

<CodeTabs>

<TabsList>
  <TabsTrigger value="cli">命令行</TabsTrigger>
  <TabsTrigger value="manual">手动</TabsTrigger>
</TabsList>
<TabsContent value="cli">

```bash
npx shadcn@latest add calendar
```

</TabsContent>

<TabsContent value="manual">

<Steps className="mb-0 pt-2">

<Step>安装以下依赖：</Step>

```bash
npm install react-day-picker date-fns
```

<Step>将 `Button` 组件添加到您的项目中。</Step>

`Calendar` 组件使用了 `Button` 组件。请确保您的项目中已经安装了它。

<Step>复制并粘贴以下代码到您的项目中。</Step>

<ComponentSource
  name="calendar"
  title="components/ui/calendar.tsx"
  styleName="radix-nova"
/>

<Step>更新导入路径以匹配您的项目配置。</Step>

</Steps>

</TabsContent>

</CodeTabs>

## 使用方法

```tsx showLineNumbers
import { Calendar } from "@/components/ui/calendar"
```

```tsx showLineNumbers
const [date, setDate] = React.useState<Date | undefined>(new Date())

return (
  <Calendar
    mode="single"
    selected={date}
    onSelect={setDate}
    className="rounded-lg border"
  />
)
```

更多信息请查看 [React DayPicker](https://react-day-picker.js.org) 文档。

## 关于

`Calendar` 组件基于 [React DayPicker](https://react-day-picker.js.org) 构建。

## Date Picker

您可以使用 `<Calendar>` 组件构建日期选择器。更多信息请参阅 [日期选择器](/docs/components/date-picker) 页面。

## 波斯 / 希吉拉历 / 贾拉利历

要使用波斯历，请编辑 `components/ui/calendar.tsx`，将 `react-day-picker` 替换为 `react-day-picker/persian`。

```diff
- import { DayPicker } from "react-day-picker"
+ import { DayPicker } from "react-day-picker/persian"
```

<ComponentPreview
  styleName="radix-nova"
  name="calendar-hijri"
  title="波斯历 / 希吉拉历 / 贾拉利历"
  description="一个波斯历日历。"
/>

## 选定日期（带时区）

日历组件接受一个 `timeZone` 属性，以确保日期在用户的本地时区中显示和选择。

```tsx showLineNumbers
export function CalendarWithTimezone() {
  const [date, setDate] = React.useState<Date | undefined>(undefined)
  const [timeZone, setTimeZone] = React.useState<string | undefined>(undefined)

  React.useEffect(() => {
    setTimeZone(Intl.DateTimeFormat().resolvedOptions().timeZone)
  }, [])

  return (
    <Calendar
      mode="single"
      selected={date}
      onSelect={setDate}
      timeZone={timeZone}
    />
  )
}
```

**注意：** 如果您注意到所选日期偏移（例如，选择 20 日突出显示 19 日），请确保 `timeZone` 属性设置为用户的本地时区。

**为什么是客户端？** 时区是通过在 `useEffect` 中使用 `Intl.DateTimeFormat().resolvedOptions().timeZone` 来检测的，以确保与服务器端渲染的兼容性。在渲染期间检测时区会导致水合不匹配，因为服务器和客户端可能处于不同的时区。

## 示例

### 基础

基础日历组件。我们使用了 `className="rounded-lg border"` 来样式化日历。

<ComponentPreview
  styleName="radix-nova"
  name="calendar-basic"
  previewClassName="h-96"
/>

### 范围日历

使用 `mode="range"` 属性启用范围选择。

<ComponentPreview
  styleName="radix-nova"
  name="calendar-range"
  previewClassName="h-[36rem] md:h-96"
/>

### 月份和年份选择器

使用 `captionLayout="dropdown"` 显示月份和年份下拉框。

<ComponentPreview
  styleName="radix-nova"
  name="calendar-caption"
  previewClassName="h-96"
/>

### 预设

<ComponentPreview
  styleName="radix-nova"
  name="calendar-presets"
  previewClassName="h-[650px]"
/>

### 日期和时间选择器

<ComponentPreview
  styleName="radix-nova"
  name="calendar-time"
  previewClassName="h-[600px]"
/>

### 已预订日期

<ComponentPreview
  styleName="radix-nova"
  name="calendar-booked-dates"
  previewClassName="h-96"
/>

### 自定义单元格大小

<ComponentPreview
  styleName="radix-nova"
  name="calendar-custom-days"
  title="自定义单元格大小"
  description="一个具有响应式自定义单元格大小的日历。"
  className="**:[.preview]:h-[560px]"
/>

您可以使用 `--cell-size` CSS 变量自定义日历单元格的大小。也可以通过使用特定断点的值实现响应式：

```tsx showLineNumbers
<Calendar
  mode="single"
  selected={date}
  onSelect={setDate}
  className="rounded-lg border [--cell-size:--spacing(11)] md:[--cell-size:--spacing(12)]"
/>
```

或者使用固定值：

```tsx showLineNumbers
<Calendar
  mode="single"
  selected={date}
  onSelect={setDate}
  className="rounded-lg border [--cell-size:2.75rem] md:[--cell-size:3rem]"
/>
```

### 显示周数

使用 `showWeekNumber` 属性显示周数。

<ComponentPreview
  styleName="radix-nova"
  name="calendar-week-numbers"
  previewClassName="h-96"
/>

## RTL

要在 shadcn/ui 中启用 RTL 支持，请参阅 [RTL 配置指南](/docs/rtl)。

请参阅 [Hijri Guide](#persian--hijri--jalali-calendar) 以启用波斯历 / 希吉拉历 / 贾拉利历。

<ComponentPreview
  styleName="radix-nova"
  name="calendar-rtl"
  direction="rtl"
  previewClassName="h-96"
/>

使用 RTL 时，从 `react-day-picker/locale` 导入 locale，并向 Calendar 组件传递 `locale` 和 `dir` 属性：

```tsx showLineNumbers
import { arSA } from "react-day-picker/locale"

;<Calendar
  mode="single"
  selected={date}
  onSelect={setDate}
  locale={arSA}
  dir="rtl"
/>
```

## API 参考

更多关于 `Calendar` 组件 API 的信息，请参见 [React DayPicker](https://react-day-picker.js.org) 文档。

## 变更日志

### RTL 支持

如果您正在从以前版本的 `Calendar` 组件升级，您需要应用以下更新以添加本地化支持：

<Steps>

<Step>导入 `Locale` 类型。</Step>

将 `Locale` 添加到从 `react-day-picker` 的导入中：

```diff
  import {
    DayPicker,
    getDefaultClassNames,
    type DayButton,
+   type Locale,
  } from "react-day-picker"
```

<Step>在 Calendar 组件中添加 `locale` 属性。</Step>

将 `locale` 属性添加到组件的参数：

```diff
  function Calendar({
    className,
    classNames,
    showOutsideDays = true,
    captionLayout = "label",
    buttonVariant = "ghost",
+   locale,
    formatters,
    components,
    ...props
  }: React.ComponentProps<typeof DayPicker> & {
    buttonVariant?: React.ComponentProps<typeof Button>["variant"]
  }) {
```

<Step>将 `locale` 传递给 DayPicker。</Step>

将 `locale` 属性传递给 `DayPicker` 组件：

```diff
    <DayPicker
      showOutsideDays={showOutsideDays}
      className={cn(...)}
      captionLayout={captionLayout}
+     locale={locale}
      formatters={{
        formatMonthDropdown: (date) =>
-         date.toLocaleString("default", { month: "short" }),
+         date.toLocaleString(locale?.code, { month: "short" }),
        ...formatters,
      }}
```

<Step>更新 CalendarDayButton 以接受 locale。</Step>

更新 `CalendarDayButton` 组件签名并传递 `locale`：

```diff
  function CalendarDayButton({
    className,
    day,
    modifiers,
+   locale,
    ...props
- }: React.ComponentProps<typeof DayButton>) {
+ }: React.ComponentProps<typeof DayButton> & { locale?: Partial<Locale> }) {
```

<Step>更新 CalendarDayButton 中的日期格式化。</Step>

在日期格式化中使用 `locale?.code`：

```diff
    <Button
      variant="ghost"
      size="icon"
-     data-day={day.date.toLocaleDateString()}
+     data-day={day.date.toLocaleDateString(locale?.code)}
      ...
    />
```

<Step>将 locale 传递给 DayButton 组件。</Step>

更新 `DayButton` 组件使用，传递 `locale` 属性：

```diff
      components={{
        ...
-       DayButton: CalendarDayButton,
+       DayButton: ({ ...props }) => (
+         <CalendarDayButton locale={locale} {...props} />
+       ),
        ...
      }}
```

<Step>更新 RTL 相关的 CSS 类。</Step>

使用逻辑属性替换方向性类以更好地支持 RTL：

```diff
  // 在 day 的 classNames 中：
- [&:last-child[data-selected=true]_button]:rounded-r-(--cell-radius)
+ [&:last-child[data-selected=true]_button]:rounded-e-(--cell-radius)
- [&:nth-child(2)[data-selected=true]_button]:rounded-l-(--cell-radius)
+ [&:nth-child(2)[data-selected=true]_button]:rounded-s-(--cell-radius)
- [&:first-child[data-selected=true]_button]:rounded-l-(--cell-radius)
+ [&:first-child[data-selected=true]_button]:rounded-s-(--cell-radius)

  // 在 range_start 的 classNames 中：
- rounded-l-(--cell-radius) ... after:right-0
+ rounded-s-(--cell-radius) ... after:end-0

  // 在 range_end 的 classNames 中：
- rounded-r-(--cell-radius) ... after:left-0
+ rounded-e-(--cell-radius) ... after:start-0

  // 在 CalendarDayButton 的 className 中：
- data-[range-end=true]:rounded-r-(--cell-radius)
+ data-[range-end=true]:rounded-e-(--cell-radius)
- data-[range-start=true]:rounded-l-(--cell-radius)
+ data-[range-start=true]:rounded-s-(--cell-radius)
```

</Steps>

应用这些更改后，您可以通过 `locale` 属性提供特定区域设置的格式支持：

```tsx
import { enUS } from "react-day-picker/locale"

;<Calendar mode="single" selected={date} onSelect={setDate} locale={enUS} />
```
