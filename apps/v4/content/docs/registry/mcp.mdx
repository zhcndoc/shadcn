---
title: MCP 服务器  
description: 为注册表开发者提供的 MCP 支持  
---

[shadcn MCP 服务器](/docs/mcp) 与任何兼容 shadcn 的注册表开箱即用。您无需做任何特别操作即可启用注册表的 MCP 支持。

---

## 先决条件

MCP 服务器通过请求您的注册表索引来工作。请确保您的注册表根目录下有一个名为 `registry` 的注册表条目文件。

例如，如果您的注册表托管在 `https://acme.com/r/[name].json`，则您应当有一个文件位于 `https://acme.com/r/registry.json` 或 `https://acme.com/r/registry`（如果您使用的是 JSON 文件扩展名）。

该文件必须是符合 [注册表 schema](/docs/registry/registry-json) 的有效 JSON 文件。

---

## 配置 MCP

请让您的注册表使用者在他们的 `components.json` 文件中配置您的注册表，并安装 shadcn MCP 服务器：

<Tabs defaultValue="claude">
  <TabsList>
    <TabsTrigger value="claude">Claude 代码</TabsTrigger>
    <TabsTrigger value="cursor">Cursor</TabsTrigger>
    <TabsTrigger value="vscode">VS Code</TabsTrigger>
    <TabsTrigger value="codex">Codex</TabsTrigger>
  </TabsList>
  <TabsContent value="claude" className="mt-4">
    **在您的 `components.json` 文件中配置注册表**：

    ```json title="components.json" showLineNumbers
    {
      "registries": {
        "@acme": "https://acme.com/r/{name}.json"
      }
    }
    ```

    **在项目中运行以下命令**：

    ```bash
    npx shadcn@latest mcp init --client claude
    ```

    **重启 Claude 代码编辑器**，然后尝试以下提示：
       - 显示 acme 注册表中的组件
       - 使用 acme 注册表中的条目创建一个登录页

    **注意：** 您可以在 Claude 代码编辑器中使用 `/mcp` 命令来调试 MCP 服务器。

  </TabsContent>

  <TabsContent value="cursor" className="mt-4">
    **在您的 `components.json` 文件中配置注册表**：

    ```json title="components.json" showLineNumbers
    {
      "registries": {
        "@acme": "https://acme.com/r/{name}.json"
      }
    }
    ```
    **在项目中运行以下命令**：
       ```bash
       npx shadcn@latest mcp init --client cursor
       ```

    打开 **Cursor 设置** 并 **启用 MCP 服务器** 以支持 shadcn。然后尝试以下提示：
       - 显示 acme 注册表中的组件
       - 使用 acme 注册表中的条目创建一个登录页

  </TabsContent>

  <TabsContent value="vscode" className="mt-4">
    **在您的 `components.json` 文件中配置注册表**：

    ```json title="components.json" showLineNumbers
    {
      "registries": {
        "@acme": "https://acme.com/r/{name}.json"
      }
    }
    ```
    **在项目中运行以下命令**：
       ```bash
       npx shadcn@latest mcp init --client vscode
       ```

    打开 `.vscode/mcp.json`，点击 shadcn 服务器旁的 **开始** 按钮。然后使用 GitHub Copilot 尝试以下提示：
       - 显示 acme 注册表中的组件
       - 使用 acme 注册表中的条目创建一个登录页

  </TabsContent>

  <TabsContent value="codex" className="mt-4">
    **在您的 `components.json` 文件中配置注册表**：

    ```json title="components.json" showLineNumbers
    {
      "registries": {
        "@acme": "https://acme.com/r/{name}.json"
      }
    }
    ```

    **将以下配置添加到 `~/.codex/config.toml`**：
       ```toml
       [mcp_servers.shadcn]
       command = "npx"
       args = ["shadcn@latest", "mcp"]
       ```

    **重启 Codex**，然后尝试以下提示：
       - 显示 acme 注册表中的组件
       - 使用 acme 注册表中的条目创建一个登录页

  </TabsContent>
</Tabs>

您可以在 [MCP 文档](/docs/mcp) 中阅读更多关于 MCP 服务器的内容。

---

## 最佳实践

以下是 MCP 兼容注册表的一些最佳实践：

1. **清晰描述**：添加简洁且信息丰富的描述，帮助 AI 助手理解注册表条目的用途及用法。  
2. **正确的依赖**：准确列出所有 `dependencies`，以便 MCP 能够自动安装。  
3. **注册表依赖**：使用 `registryDependencies` 表示条目间的关系。  
4. **统一命名**：使用 kebab-case 命名组件，并保持整个注册表的一致性。